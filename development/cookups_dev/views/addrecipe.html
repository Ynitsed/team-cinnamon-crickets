<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<!-- Title here -->
		<title><%=title %></title>
		<!-- Description, Keywords and Author -->
		<meta name="description" content="Your description">
		<meta name="keywords" content="Your,Keywords">
		<meta name="author" content="ResponsiveWebInc">
		
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<!-- Styles -->
		<!-- Bootstrap CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="css/jasny-bootstrap.min.css" rel="stylesheet" media="screen">
		<!-- Portfolio CSS -->
		<link href="css/prettyPhoto.css" rel="stylesheet">
		<!-- Font awesome CSS -->
		<link href="css/font-awesome.min.css" rel="stylesheet">	
		<!-- Custom Less -->
		<link href="css/less-style.css" rel="stylesheet">	
		<!-- Custom CSS -->
		<link href="css/style.css" rel="stylesheet">
		<!--[if IE]><link rel="stylesheet" href="css/ie-style.css"><![endif]-->
		
		<!-- Favicon -->
		<link rel="shortcut icon" href="#">
	</head>
	
	<body>
		
		
		<script>
    var counter = 1;
    var limit = 11;
    
    function addInput(divName, elementName){
      if (counter == limit)  {
          alert("You have reached the limit of adding " + counter + " inputs");
      }
      else {
         // var newdiv = document.createElement('div');
         var newdiv = document.getElementById(elementName).cloneNode(true);
          document.getElementById(divName).appendChild(newdiv);
          counter++;
      }
    }
    </script>
		
		
		<script>
    var counter = 1;
    var limit = 1;
    // var search_url="";
    // var id_string= "_app_id=4667a454";
    // var key_string="_app_key=19e631ca5cc3f554227ff9ee8bc5c753";
    // var id_key=id_string+"&"+key_string;
    // var base_url="http://api.yummly.com/v1/api/recipes?"+id_key;
    // var search_variables="";
    function addInput(divName, elementName){
      if (counter == limit)  {
          alert("You have reached the limit of adding " + counter + " inputs");
      }
      else {
         // var newdiv = document.createElement('div');
      //    var newdiv = document.getElementById(elementName).cloneNode(true);
      //     document.getElementById(divName).appendChild(newdiv);
      //     counter++;
      // }
    }
    </script>
			
		<!-- Page Wrapper -->
		<div class="wrapper">
		
			<!-- Header Start -->
			
			<div class="header">
				<div class="container">
					<!-- Header top area content -->	
					<div class="header-top">
						<div class="row">
							<div class="col-md-4 col-sm-4">
								
							</div>
							<div class="col-md-4 col-sm-4">
								
							</div>
							<div class="col-md-4 col-sm-4">
					
								<div class="clearfix"></div>
							</div>
						</div>
					</div>				
					<div class="row">
						<div class="col-md-4 col-sm-5">
							<!-- Link -->
							<a href="/">
								<!-- Logo area -->
								<div class="logo">
									<img class="img-responsive" src="img/logo.png" alt="" />
									<!-- Heading -->
									<h1>CookUps</h1>
									<!-- Paragraph -->
									<p>Food made easy.</p>
								</div>
							</a>
						</div>
						<div class="col-md-8 col-sm-7">
							<!-- Navigation -->
							<nav class="navbar navbar-default navbar-right" role="navigation">
								<div class="container-fluid">
									<!-- Brand and toggle get grouped for better mobile display -->
									<div class="navbar-header">
										<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
											<span class="sr-only">Toggle navigation</span>
											<span class="icon-bar"></span>
											<span class="icon-bar"></span>
											<span class="icon-bar"></span>
										</button>
									</div>

									<!-- Collect the nav links, forms, and other content for toggling -->
									<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
										<ul class="nav navbar-nav">
											<li><a href="/"><img src="img/nav-menu/nav1.jpg" class="img-responsive" alt="" /> Home</a></li>
											
											<li><a href="form"><img src="img/nav-menu/nav3.jpg" class="img-responsive" alt="" />Search</a></li>

											<li><a href="/viewProfile"><img src=<%=user.picture %> onError="this.onerror=null;this.src='img/squaredefault.png';" class="img-responsive" alt="" /><%= user.uname %></a></li>
								
											<!--	<ul class="dropdown-menu">
													<li><a href="items.html">Profile Home</a></li>
													<li><a href="item-single.html">Add Recipe</a></li>
													<li><a href="checkout.html">History</a></li>
													<li><a href="reserve-seats.html">Diet Track</a></li>
												</ul>
											</li> -->
											
											<li><a href="about"><img src="img/nav-menu/nav6.jpg" class="img-responsive" alt="" /> About</a></li>

											<li><a href="/user/logout"><img src="img/nav-menu/nav5.jpg" class="img-responsive" alt="" />Logout</a></li>
											
										</ul>
									</div><!-- /.navbar-collapse -->
								</div><!-- /.container-fluid -->
							</nav>
						</div>
					</div>
				</div> <!-- / .container -->
			</div>
			
			<!-- Header End -->
			
			<!-- Banner Start -->
			
			<div class="banner padd">
				<div class="container">
					<!-- Image -->
					<img class="img-responsive" src="img/crown-white.png" alt="" />
					<!-- Heading -->
					<h2 class="white">
					<% if(recipemessage && recipemessage[0]){ %>
						<%= recipemessage %>
					<% } else{ %>
						Add New Recipe
					<% } %>
					</h2>
					<ol class="breadcrumb">
						<li><a href="/">Home</a></li>
						<li class="active">Add Recipe</li>
					</ol>
					<div class="clearfix"></div>
				</div>
			</div>
			
			<!-- Inner Content -->
			
			<div class="inner-page padd">
				
				<!-- Shopping Start -->
				
				<div class="shopping">
					<div class="container">
						<!-- Shopping items content -->
						<div class="shopping-content">
							<!-- <form method="post" action="/recipe/add" class="form-signin" role="form"> -->
								<div class="recipe-content">
									<h4>
										<div class="form-group">
											<input style="font-size:25px; height:50px;" name="name" id="recipe_name" class="form-control" type="text" placeholder="Recipe Name (required)" />
										</div>
									</h4>
									<br>
									<div class="row">
										<div class="col-md-6 col-sm-6">
											<div class="recipe-item">
												<!-- Recipe ingredients -->
												<div class="container">
													<div class="row clearfix">
														<div class="col-md-4 col-sm-6">
															<h3>Ingredients (required):</h3>
															<table class="table table-bordered table-hover" id="tab_logic">
																<thead>
																	<tr >
																	    <th class="text-center">
																	        Name
																	    </th>
																	</tr>
																</thead>
																	<tbody>
																	<tr id='addr0'>
																		<td>
																		    <center>
																		        <input id="0" type="text" name='name0'  placeholder='Ingredient' class="form-control"/>
																		    </center>
																		</td>
																	</tr>
																	<tr id='addr1'>
																	</tr>
																	</tbody>
															</table>
																	     
														</div>
													</div>
													<script type="text/javascript">
														$(document).ready(function(){
															var i=1;
															$("#add_row").click(function(){
																$('#addr'+i).html("<td><center><input id=" + i + " name='name"+i+"' type='text' placeholder='Ingredient' class='form-control input-md'  /> </center></td>");
																
																$('#tab_logic').append('<tr id="addr'+(i+1)+'"></tr>');
																i++; 
															});
																     
															$("#delete_row").click(function(){
																if(i>1){
																    $("#addr"+(i-1)).html('');
																    $('#addr'+i).remove();
																    $('#addr'+(i-1)+'_result').remove();
																    i--;
																}
															});

														});
													</script>
													<a id="add_row" class="btn btn-default">Add</a>
													<a id='delete_row' class="btn btn-default">Remove</a>
												</div>
												<br>
												<br>
											</div>
											<br>
											<!-- <div class="recipe-item">
												<div class="fileinput fileinput-new" data-provides="fileinput">
						  							<div class="fileinput-new thumbnail" style="width: 400px; height: 300px;"> 
							    						<div>
							    							Upload an image
							    						</div>
						 							</div>
						  							<div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 400px; max-height: 300px;"></div>
						  							<div>

						    							<span class="btn btn-default btn-file"><span class="fileinput-new">Upload</span><span class="fileinput-exists">Change</span><input id="file" type="file" name="files"></span>

						    							<span class="btn btn-default btn-file"><span class="fileinput-new">Upload</span><span class="fileinput-exists">Change</span><input enctype="multipart/form-data" type="file" name="files"></span>

						    							<a href="#" class="btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
						  							</div>
												</div>
											</div> -->
										</div>	
										<div class="col-md-6 col-sm-12">
											<!-- Recipe Items -->
											<div class="recipe-item">
											<!-- Heading -->
												<h3>Instructions (required):</h3>
												<!-- Recipe Description -->
												<div class="recipe-description">
													<div class="form-group">
														<textarea style="resize:none;" id="directions" name="instructions" class="form-control" rows="10"></textarea> 
													</div>
													<!-- Heading -->	
													<h3>Nutrition Info:</h3>
													<!-- Recipe nutrition table -->
													<div class="table-responsive">
														<table class="table table-bordered">
															<tbody>
																<tr>
																	<td>
																		<center>
																			Calories
																		</center>
																	</td>
																	<td>
																		<center>
																			<input id="calories" style="height:25px; width:100px;" class="form-control" type="text" placeholder="~ Amount" />
																		</center>
																	</td>
																</tr>
																<tr>
																	<td>
																		<center>
																			Servings
																		</center>
																	</td>
																	<td>
																		<center>
																			<input id="servings" style="height:25px; width:100px;" class="form-control" type="text" placeholder="~ Amount" />
																		</center>
																	</td>
																</tr>
																<tr>
																	<td>
																		<center>
																			Time To Cook
																		</center>
																	</td>
																	<td>
																		<center>
																			<input id="totaltime" style="height:25px; width:100px;" class="form-control" type="text" placeholder="~ Minutes" />
																		</center>
																	</td>
																</tr>
																<tr>
																	<td>
																		<center>
																			Sweet
																		</center>
																	</td>
																	<td>
																		<center>
																			<input id="sweet" style="height:25px; width:100px;" class="form-control" type="text" placeholder="Rate 1 - 10 "/>
																		</center>
																	</td>
																</tr>
																<tr>
																	<td>
																		<center>
																			Salty
																		</center>
																	</td>
																	<td>
																		<center>
																			<input id="salty" style="height:25px; width:100px;" class="form-control" type="text" placeholder="Rate 1 - 10 "/>
																		</center>
																	</td>
																</tr>
																<tr>
																	<td>
																		<center>
																			Bitter
																		</center>
																	</td>
																	<td>
																		<center>
																			<input id="bitter" style="height:25px; width:100px;" class="form-control" type="text" placeholder="Rate 1 - 10 " />
																		</center>
																	</td>
																</tr>
																<tr>
																	<td>
																		<center>
																			Sour
																		</center>
																	</td>
																	<td>
																		<center>
																			<input id="sour" style="height:25px; width:100px;" class="form-control" type="text" placeholder="Rate 1 - 10 " />
																		</center>
																	</td>
																</tr>
																<tr>
																	<td>
																		<center>
																			Meaty
																		</center>
																	</td>
																	<td>
																		<center>
																			<input id="meaty" style="height:25px; width:100px;" class="form-control" type="text" placeholder="Rate 1 - 10 " />
																		</center>
																	</td>
																</tr>
															</tbody>
														</table>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<br>
								<div align="center">
									<script type="text/javascript">
										function grabAllIngr(){
											var nutrition = ["recipe_name", "directions", "calories", "servings", "totaltime", "sweet", "salty", "bitter", "sour", "meaty", "file"];
											
											var table_rows = document.getElementById("tab_logic").rows.length;
											var ingr_array = [];

											for(var z=0; z<table_rows-2; z++){
												var ingre = document.getElementById(z).value;
												if(ingre !== null){
													ingr_array.push(ingre);
													if(document.getElementById("addr"+z+"_result") != undefined){
														$('#addr'+z+'_show').val(ingre);
													} else {
														$('#table_results').append('<tr id="addr'+z+'_result"></tr>');
														$('#addr'+z+'_result').html("<td><center><input readonly style='border:none; text-align:center;' id='addr"+z+"_show' value='' type='text'/></center></td>");
														$('#addr'+z+'_show').val(ingre);
													}
												}
											}
											
											$('#ingredients').val(JSON.stringify(ingr_array));

											for(var k=0; k<nutrition.length;k++){
												var div = "#" + nutrition[k] + "_result";	
												if(nutrition[k] === "directions"){
													$(div).html($('#directions').val());
												}
												var user_input = document.getElementById(nutrition[k]).value;
												if(nutrition[k] === "recipe_name"){
													$(div).val(user_input);
												} else if(nutrition[k] === "file"){
													$(div).value = user_input;
												} else{
													$(div).val(user_input);
												}
											}
										}
									</script>

									<button onclick="grabAllIngr();" data-toggle="modal" data-target="#myModal" type="button" class="btn btn-default">Add</button>
									<!-- Modal -->
									<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
									  <div class="modal-dialog modal-lg">
									    <div class="modal-content">
									      <div class="modal-header">
									        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
									        <h4 class="modal-title" id="myModalLabel">Are You Sure You Want To Add This Recipe?</h4>
									      </div>
									      <div class="modal-body">
									      	<form method="post" action="/recipe/add" class="form-signin" role="form">
									      	<div class="recipe-content">
												<h4>
													<input type="hidden" name="ingredients" id="ingredients" value=""/>
													<div class="form-group">
														<input style="font-size:35px; border:none; text-align:center; height: 50px" name="name" id="recipe_name_result" class="form-control" type="text" value="" />
													</div>
												</h4>
												<br>
												<form method="post" action="/recipe/add" class="form-signin" role="form">
												<div class="row">
													<div class="col-md-6 col-sm-6">
														<div class="recipe-item">
															<!-- Recipe ingredients -->
															<div class="container">
																<div class="row clearfix">
																	<div class="col-md-4 col-sm-6">
																		<h3>Ingredients :</h3>
																		<table class="table table-bordered table-hover" id="table_results">
																			<thead>
																				<tr >
																				    <th class="text-center">
																				        Name
																				    </th>
																				</tr>
																			</thead>
																				<tbody>
																				</tbody>
																		</table>
																				     
																	</div>
																</div>
															</div>
															<br>
															<br>
														</div>
														<br>
														<!--<div class="recipe-item">
															<div class="fileinput fileinput-new" data-provides="fileinput">
									  							<div class="fileinput-new thumbnail" style="width: 400px; height: 300px;"> 
										    						<div id="file_result" name="file_result">
										    							Upload an image
										    						</div>
									 							</div>
									 							<script type="text/javascript">
									 								$('#files').onload(function{
									 									console.log(document.getElementById("files").value);
									 								});
									 							</script>
									  							<div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 400px; max-height: 300px;" id="files"></div>
									  							<div>
									    							<span class="btn btn-default btn-file"><span class="fileinput-new">Upload</span><span class="fileinput-exists">Change</span><input type="file" name="..."></span>
									    							<a href="#" class="btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
									    							<div id="file_result" name="file_result">
									    								
									    							</div>

									    							<span class="btn btn-default btn-file"><span class="fileinput-new">Upload</span><span class="fileinput-exists">Change</span><input type="file" name="..."></span>
									    							<a href="#" class="btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
									    							<input type="file" enctype="multipart/form-data" name="..."></span>

									  							</div>
															</div>
														</div> -->
													</div>	
													<div class="col-md-6 col-sm-12">
														<!-- Recipe Items -->
														<div class="recipe-item">
														<!-- Heading -->
															<h3>Directions :</h3>
															<!-- Recipe Description -->
															<div class="recipe-description">
																<div class="form-group">
										    						<textarea readonly style="resize:none;" id="directions_result" name="instructions" class="form-control" rows="10"></textarea> 
																</div>
																<!-- Heading -->	
																<h3>Nutrition Info:</h3>
																<!-- Recipe nutrition table -->
																<div class="table-responsive">
																	<table class="table table-bordered">
																		<tbody>
																			<tr>
																				<td>
																					<center>
																						Calories
																					</center>
																				</td>
																				<td>
																					<center>
																						<input readonly style="border:none; text-align:center;" id="calories_result" name="calories" value="" type="text"/>
																					</center>
																				</td>
																			</tr>
																			<tr>
																				<td>
																					<center>
																						Servings
																					</center>
																				</td>
																				<td style="width:1px;">
																					<center>
																						<input readonly align="center" style="border:none; text-align:center;" name="servings" id="servings_result" value="" type="text"/>
																					</center>
																				</td>
																			</tr>
																			<tr>
																				<td>
																					<center>
																						Time To Cook
																					</center>
																				</td>
																				<td>
																					<center>
																						<input readonly style="border:none; text-align:center;" id="totaltime_result" name="totalTime" value="" type="text"/>
																					</center>
																				</td>
																			</tr>
																			<tr>
																				<td>
																					<center>
																						Sweet
																					</center>
																				</td>
																				<td>
																					<center>
																						<input readonly style="border:none; text-align:center;" id="sweet_result" name="sweet" value="" type="text"/>
																					</center>
																				</td>
																			</tr>
																			<tr>
																				<td>
																					<center>
																						Salty
																					</center>
																				</td>
																				<td>
																					<center>
																						<input readonly style="border:none; text-align:center;" id="salty_result" name="salty" value="" type="text"/>
																					</center>
																				</td>
																			</tr>
																			<tr>
																				<td>
																					<center>
																						Bitter
																					</center>
																				</td>
																				<td>
																					<center>
																						<input readonly style="border:none; text-align:center;" id="bitter_result" name="bitter" value="" type="text"/>
																					</center>
																				</td>
																			</tr>
																			<tr>
																				<td>
																					<center>
																						Sour
																					</center>
																				</td>
																				<td>
																					<center>
																						<input readonly style="border:none; text-align:center;" id="sour_result" name="sour" value="" type="text"/>
																					</center>
																				</td>
																			</tr>
																			<tr>
																				<td>
																					<center>
																						Meaty
																					</center>
																				</td>
																				<td>
																					<center>
																						<input readonly style="border:none; text-align:center;" id="meaty_result" name="meaty" value="" type="text"/>
																					</center>
																				</td>
																			</tr>
																		</tbody>
																	</table>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
									      </div>
									      <div class="modal-footer">
									        <button class="btn btn-default">Add Recipe</button>
									      </div>
									  	</form>
									    </div>
									  </div>
									</div>
								</div>
						</div>
					</div>

			<!-- Footer Start -->
			
			<div class="footer padd">
					<center>
						<div class="logo">
							<img class="img-responsive" src="img/logo.png" alt="" />
							<!-- Heading -->
							<h1>Cook Ups</h1>
						</div>
						<!-- Paragraph -->
						<p>Anyone Can COOK!</p>
						<!-- Paragraph -->
						<p>&copy; Copyright 2014 <a href="#">Cook Ups</a></p>
					</center>
				</div>
			
			<!-- Footer End -->
			
		</div><!-- / Wrapper End -->
		
		
		<!-- Scroll to top -->
		<span class="totop"><a href="#"><i class="fa fa-angle-up"></i></a></span> 
	
		<!-- Javascript files -->
		<!-- jQuery -->
		<script src="js/jasny-bootstrap.min.js"></script>
		<script src="js/jquery.js"></script>
		<!-- Bootstrap JS -->
		<script src="js/bootstrap.min.js"></script>
		<!-- Pretty Photo JS -->
		<script src="js/jquery.prettyPhoto.js"></script>
		<!-- Respond JS for IE8 -->
		<script src="js/respond.min.js"></script>
		<!-- HTML5 Support for IE -->
		<script src="js/html5shiv.js"></script>
		<!-- Custom JS -->
		<script src="js/custom.js"></script>
		<!-- JS code for this page -->
		<script>
		
		</script>
	</body>	
</html>
